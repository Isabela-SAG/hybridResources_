<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<title>Matching Frontend</title>
	<style>
		body { font-family: Arial, sans-serif; margin: 40px; }
		label { display: block; margin-top: 20px; }
		textarea, input[type="file"] { width: 100%; margin-top: 5px; }
		button { margin-top: 10px; }
		pre { background: #f4f4f4; padding: 10px; }
		section { margin-bottom: 40px; }
	</style>
</head>
<body>
	<h1>Matching API Frontend</h1>

	<section>
		<h2>Match Vaga Única</h2>
		<label for="descricao">Descrição da Vaga:</label>
		<textarea id="descricao" rows="4"></textarea>
		<button onclick="matchVaga()">Enviar</button>
		<pre id="vagaResult"></pre>
	</section>

	<section>
		<h2>Match Várias Vagas (JSON)</h2>
		<label for="vagasFile">Selecione o arquivo de vagas (.json):</label>
		<input type="file" id="vagasFile" accept=".json">
		<button onclick="matchVagas()">Enviar</button>
		<pre id="vagasResult"></pre>
	</section>

	<script>
		async function matchVaga() {
			const descricao = document.getElementById('descricao').value;
			const formData = new FormData();
			formData.append('descricao', descricao);

			const res = await fetch('/match_vaga', {
				method: 'POST',
				body: formData
			});
			let data;
			try {
				data = await res.json();
			} catch (e) {
				data = { erro: 'Erro ao processar resposta.' };
			}
			document.getElementById('vagaResult').textContent = JSON.stringify(data, null, 2);
		}

		async function matchVagas() {
			const fileInput = document.getElementById('vagasFile');
			if (!fileInput.files.length) {
				alert('Selecione um arquivo JSON!');
				return;
			}
			const formData = new FormData();
			formData.append('file', fileInput.files[0]);

			const res = await fetch('/match_vagas', {
				method: 'POST',
				body: formData
			});
			let data;
			try {
				data = await res.json();
			} catch (e) {
				data = { erro: 'Erro ao processar resposta.' };
			}
			document.getElementById('vagasResult').textContent = JSON.stringify(data, null, 2);
		}
	</script>
</body>
</html>
